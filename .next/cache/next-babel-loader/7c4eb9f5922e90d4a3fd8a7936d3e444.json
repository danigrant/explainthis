{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs2/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\"));\n\nvar _isomorphicUnfetch = _interopRequireDefault(require(\"isomorphic-unfetch\"));\n\nvar credentials = \"\".concat(process.env.TWITTER_API_KEY, \":\").concat(process.env.TWITTER_API_SECRET);\nvar credentialsBase64Encoded = new Buffer(credentials).toString('base64');\n\nfunction getTwitterToken() {\n  return _getTwitterToken.apply(this, arguments);\n} // pass in username no @ and get avatar\n\n\nfunction _getTwitterToken() {\n  _getTwitterToken = (0, _asyncToGenerator2[\"default\"])(\n  /*#__PURE__*/\n  _regenerator[\"default\"].mark(function _callee2() {\n    var res, json;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return (0, _isomorphicUnfetch[\"default\"])(\"https://api.twitter.com/oauth2/token\", {\n              body: 'grant_type=client_credentials',\n              headers: {\n                \"Authorization\": \"Basic \".concat(credentialsBase64Encoded),\n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n              },\n              method: \"POST\"\n            });\n\n          case 2:\n            res = _context2.sent;\n            _context2.next = 5;\n            return res.json();\n\n          case 5:\n            json = _context2.sent;\n            return _context2.abrupt(\"return\", json.access_token);\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getTwitterToken.apply(this, arguments);\n}\n\nfunction getTwitterAvatar(_x) {\n  return _getTwitterAvatar.apply(this, arguments);\n}\n\nfunction _getTwitterAvatar() {\n  _getTwitterAvatar = (0, _asyncToGenerator2[\"default\"])(\n  /*#__PURE__*/\n  _regenerator[\"default\"].mark(function _callee3(username) {\n    var accessToken, res, json;\n    return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return getTwitterToken();\n\n          case 2:\n            accessToken = _context3.sent;\n            _context3.next = 5;\n            return (0, _isomorphicUnfetch[\"default\"])(\"https://api.twitter.com/1.1/users/show.json?screen_name=\".concat(username), {\n              headers: {\n                \"content-type\": \"application/json\",\n                \"Authorization\": \"Bearer \".concat(accessToken)\n              }\n            });\n\n          case 5:\n            res = _context3.sent;\n            _context3.next = 8;\n            return res.json();\n\n          case 8:\n            json = _context3.sent;\n            console.log(json.profile_image_url_https);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _getTwitterAvatar.apply(this, arguments);\n}\n\nvoid function () {\n  var _main = (0, _asyncToGenerator2[\"default\"])(\n  /*#__PURE__*/\n  _regenerator[\"default\"].mark(function _callee() {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return getTwitterToken();\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  function main() {\n    return _main.apply(this, arguments);\n  }\n\n  return main;\n}()();\nmodule.exports = {};","map":{"version":3,"sources":["/Users/danigrant/Projects/explainthis/components/Twitter.js"],"names":["credentials","process","env","TWITTER_API_KEY","TWITTER_API_SECRET","credentialsBase64Encoded","Buffer","toString","getTwitterToken","body","headers","method","res","json","access_token","getTwitterAvatar","username","accessToken","console","log","profile_image_url_https","main","module","exports"],"mappings":";;;;;;;;AAAA;;AAEA,IAAMA,WAAW,aAAMC,OAAO,CAACC,GAAR,CAAYC,eAAlB,cAAqCF,OAAO,CAACC,GAAR,CAAYE,kBAAjD,CAAjB;AACA,IAAMC,wBAAwB,GAAG,IAAIC,MAAJ,CAAWN,WAAX,EAAwBO,QAAxB,CAAiC,QAAjC,CAAjC;;SAEeC,e;;EAaf;;;;;;+BAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACkB,mCAAM,sCAAN,EAA8C;AAC5DC,cAAAA,IAAI,EAAE,+BADsD;AAE5DC,cAAAA,OAAO,EAAE;AACP,iDAA0BL,wBAA1B,CADO;AAEP,gCAAgB;AAFT,eAFmD;AAM5DM,cAAAA,MAAM,EAAE;AANoD,aAA9C,CADlB;;AAAA;AACMC,YAAAA,GADN;AAAA;AAAA,mBASmBA,GAAG,CAACC,IAAJ,EATnB;;AAAA;AASMA,YAAAA,IATN;AAAA,8CAUSA,IAAI,CAACC,YAVd;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAceC,gB;;;;;;;+BAAf,kBAAgCC,QAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAC0BR,eAAe,EADzC;;AAAA;AACMS,YAAAA,WADN;AAAA;AAAA,mBAEkB,qGAAiED,QAAjE,GAA6E;AAC3FN,cAAAA,OAAO,EAAE;AACP,gCAAgB,kBADT;AAEP,kDAA2BO,WAA3B;AAFO;AADkF,aAA7E,CAFlB;;AAAA;AAEML,YAAAA,GAFN;AAAA;AAAA,mBAQmBA,GAAG,CAACC,IAAJ,EARnB;;AAAA;AAQMA,YAAAA,IARN;AASEK,YAAAA,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACO,uBAAjB;;AATF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAYA,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACGZ,eAAe,EADlB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,WAAea,IAAf;AAAA;AAAA;;AAAA,SAAeA,IAAf;AAAA,KAAL;AAIAC,MAAM,CAACC,OAAP,GAAiB,EAAjB","sourcesContent":["import fetch from 'isomorphic-unfetch';\n\nconst credentials = `${process.env.TWITTER_API_KEY}:${process.env.TWITTER_API_SECRET}`;\nconst credentialsBase64Encoded = new Buffer(credentials).toString('base64');\n\nasync function getTwitterToken() {\n  let res = await fetch(\"https://api.twitter.com/oauth2/token\", {\n    body: 'grant_type=client_credentials',\n    headers: {\n      \"Authorization\": `Basic ${credentialsBase64Encoded}`,\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    },\n    method: \"POST\"\n  })\n  let json = await res.json()\n  return json.access_token\n}\n\n// pass in username no @ and get avatar\nasync function getTwitterAvatar(username) {\n  let accessToken = await getTwitterToken()\n  let res = await fetch(`https://api.twitter.com/1.1/users/show.json?screen_name=${username}`, {\n    headers: {\n      \"content-type\": \"application/json\",\n      \"Authorization\": `Bearer ${accessToken}`\n    }\n  })\n  let json = await res.json()\n  console.log(json.profile_image_url_https);\n}\n\nvoid async function main() {\n  await getTwitterToken()\n}()\n\nmodule.exports = {}\n"]},"metadata":{},"sourceType":"script"}