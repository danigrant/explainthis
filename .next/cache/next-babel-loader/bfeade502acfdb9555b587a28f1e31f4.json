{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/danigrant/Projects/explainthis/pages/explainthis/[id].js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport TopWrapper from '../../components/TopWrapper';\nimport MenuContainer from '../../components/MenuContainer';\nimport AppContainer from '../../components/AppContainer';\nimport ActionBar from '../../components/ActionBar';\nimport ExplanationsSection from '../../components/ExplanationsSection';\nimport Editor from '../../components/Editor';\nimport { getConceptExplanations } from '../../components/Firebase';\nimport Loading from '../../components/Loading';\nimport { withRouter } from 'next/router';\nimport AddExplanation from '../../components/AddExplanation';\n\nclass ExplainThis extends React.Component {\n  constructor(props) {\n    super(props); // first thing you always do, calls the master react constructor\n\n    _defineProperty(this, \"handleAnswerClick\", () => {\n      this.setState({\n        showEditor: !this.state.showEditor\n      });\n    });\n\n    _defineProperty(this, \"incrementExplanation\", () => {\n      let newIndex = this.state.explanationIndex == this.state.data.explanations.length - 1 ? 0 : this.state.explanationIndex + 1;\n      this.setState({\n        explanationIndex: newIndex\n      });\n      console.log('in incrementExplanation, new index is', this.state.explanationIndex, 'out of', this.state.data.explanations.length);\n    });\n\n    this.state = {\n      showEditor: false,\n      data: {},\n      explanationIndex: 0\n    };\n    const {\n      router\n    } = this.props;\n    this.handleSubmitAnswer = this.handleSubmitAnswer.bind(this);\n    this.handleUdatingDisplayedScores = this.handleUdatingDisplayedScores.bind(this);\n    this.parentHandleVote = this.parentHandleVote.bind(this);\n  }\n\n  async componentWillMount() {\n    const {\n      router\n    } = this.props;\n    this.setState({\n      data: await getConceptExplanations(router.query.id)\n    });\n  }\n\n  async parentHandleVote() {\n    const {\n      router\n    } = this.props; // this.setState({\n    //   data: await getConceptExplanations(router.query.id)\n    // })\n  }\n\n  async handleSubmitAnswer() {\n    const {\n      router\n    } = this.props;\n    this.setState({\n      showEditor: !this.state.showEditor,\n      data: await getConceptExplanations(router.query.id)\n    });\n  }\n\n  async handleUdatingDisplayedScores() {\n    const {\n      router\n    } = this.props;\n    await new _Promise(cb => setTimeout(cb, 500)); // this is extremely silly: i am waiting 500ms for firebase to update otherwise there is a lag and the score looks like it's 1\n\n    this.setState({\n      data: await getConceptExplanations(router.query.id)\n    });\n  }\n\n  render() {\n    {\n      const {\n        router\n      } = this.props;\n\n      if (!this.state.data.concept) {\n        return __jsx(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        });\n      } else if (this.state.showEditor) {\n        return __jsx(TopWrapper, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, __jsx(MenuContainer, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }), __jsx(AppContainer, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, __jsx(AddExplanation, {\n          handleAnswerClick: this.handleAnswerClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        })));\n      } else {\n        return __jsx(\"div\", {\n          className: \"jsx-3425659081\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, __jsx(TopWrapper, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, __jsx(MenuContainer, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }), __jsx(AppContainer, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, __jsx(\"div\", {\n          className: \"jsx-3425659081\" + \" \" + \"explanationHeader\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, __jsx(\"h1\", {\n          className: \"jsx-3425659081\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, \"The short, sweet and wonderfully wacky ways to explain \", __jsx(\"span\", {\n          className: \"jsx-3425659081\" + \" \" + \"concept-name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, this.state.data.concept)), __jsx(\"p\", {\n          className: \"jsx-3425659081\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, this.state.data.explanations.length, \" Explanations \\u2022 Keep clicking through until you find one that, well, clicks.\"), __jsx(ActionBar, {\n          handleAnswerClick: this.handleAnswerClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }), this.state.showEditor && __jsx(Editor, {\n          handleSubmitAnswer: this.handleSubmitAnswer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        })), __jsx(ExplanationsSection, {\n          parentHandleVote: this.parentHandleVote,\n          handleUdatingDisplayedScores: this.handleUdatingDisplayedScores,\n          incrementExplanation: this.incrementExplanation,\n          currentExplanation: this.state.data.explanations[this.state.explanationIndex],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }))), __jsx(_JSXStyle, {\n          id: \"3425659081\",\n          __self: this\n        }, \".explanationHeader.jsx-3425659081 h1.jsx-3425659081{margin-bottom:0;}.explanationHeader.jsx-3425659081 p.jsx-3425659081{margin-top:10px;margin-bottom:5px;color:#a9a9a9;}.concept-name.jsx-3425659081{color:#6462EF;}ActionBar.jsx-3425659081{margin-bottom:10px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYW5pZ3JhbnQvUHJvamVjdHMvZXhwbGFpbnRoaXMvcGFnZXMvZXhwbGFpbnRoaXMvW2lkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErRjBCLEFBR21DLEFBR0EsQUFLRixBQUdLLGNBRnJCLEVBUkEsQUFHb0IsR0FRcEIsZUFQZ0IsY0FDaEIiLCJmaWxlIjoiL1VzZXJzL2RhbmlncmFudC9Qcm9qZWN0cy9leHBsYWludGhpcy9wYWdlcy9leHBsYWludGhpcy9baWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFRvcFdyYXBwZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Ub3BXcmFwcGVyJ1xuaW1wb3J0IE1lbnVDb250YWluZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9NZW51Q29udGFpbmVyJ1xuaW1wb3J0IEFwcENvbnRhaW5lciBmcm9tICcuLi8uLi9jb21wb25lbnRzL0FwcENvbnRhaW5lcic7XG5pbXBvcnQgQWN0aW9uQmFyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQWN0aW9uQmFyJ1xuaW1wb3J0IEV4cGxhbmF0aW9uc1NlY3Rpb24gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9FeHBsYW5hdGlvbnNTZWN0aW9uJ1xuaW1wb3J0IEVkaXRvciBmcm9tICcuLi8uLi9jb21wb25lbnRzL0VkaXRvcidcbmltcG9ydCB7IGdldENvbmNlcHRFeHBsYW5hdGlvbnMgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0ZpcmViYXNlJ1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Mb2FkaW5nJ1xuaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xuaW1wb3J0IEFkZEV4cGxhbmF0aW9uIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQWRkRXhwbGFuYXRpb24nXG5cbmNsYXNzIEV4cGxhaW5UaGlzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcykgLy8gZmlyc3QgdGhpbmcgeW91IGFsd2F5cyBkbywgY2FsbHMgdGhlIG1hc3RlciByZWFjdCBjb25zdHJ1Y3RvclxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzaG93RWRpdG9yOiBmYWxzZSxcbiAgICAgIGRhdGE6IHt9LFxuICAgICAgZXhwbGFuYXRpb25JbmRleDogMFxuICAgIH1cbiAgICBjb25zdCB7IHJvdXRlciB9ID0gdGhpcy5wcm9wc1xuICAgIHRoaXMuaGFuZGxlU3VibWl0QW5zd2VyID0gdGhpcy5oYW5kbGVTdWJtaXRBbnN3ZXIuYmluZCh0aGlzKVxuICAgIHRoaXMuaGFuZGxlVWRhdGluZ0Rpc3BsYXllZFNjb3JlcyA9IHRoaXMuaGFuZGxlVWRhdGluZ0Rpc3BsYXllZFNjb3Jlcy5iaW5kKHRoaXMpXG4gICAgdGhpcy5wYXJlbnRIYW5kbGVWb3RlID0gdGhpcy5wYXJlbnRIYW5kbGVWb3RlLmJpbmQodGhpcylcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgY29uc3QgeyByb3V0ZXIgfSA9IHRoaXMucHJvcHNcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRhdGE6IGF3YWl0IGdldENvbmNlcHRFeHBsYW5hdGlvbnMocm91dGVyLnF1ZXJ5LmlkKVxuICAgIH0pXG4gIH1cbiAgaGFuZGxlQW5zd2VyQ2xpY2sgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzaG93RWRpdG9yOiAhdGhpcy5zdGF0ZS5zaG93RWRpdG9yXG4gICAgfSlcbiAgfVxuICBhc3luYyBwYXJlbnRIYW5kbGVWb3RlKCkge1xuICAgIGNvbnN0IHsgcm91dGVyIH0gPSB0aGlzLnByb3BzXG4gICAgLy8gdGhpcy5zZXRTdGF0ZSh7XG4gICAgLy8gICBkYXRhOiBhd2FpdCBnZXRDb25jZXB0RXhwbGFuYXRpb25zKHJvdXRlci5xdWVyeS5pZClcbiAgICAvLyB9KVxuICB9XG4gIGluY3JlbWVudEV4cGxhbmF0aW9uID0gKCkgPT4ge1xuICAgIGxldCBuZXdJbmRleCA9IHRoaXMuc3RhdGUuZXhwbGFuYXRpb25JbmRleCA9PSB0aGlzLnN0YXRlLmRhdGEuZXhwbGFuYXRpb25zLmxlbmd0aCAtIDEgPyAwIDogdGhpcy5zdGF0ZS5leHBsYW5hdGlvbkluZGV4ICsgMVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZXhwbGFuYXRpb25JbmRleDogbmV3SW5kZXhcbiAgICB9KVxuICAgIGNvbnNvbGUubG9nKCdpbiBpbmNyZW1lbnRFeHBsYW5hdGlvbiwgbmV3IGluZGV4IGlzJywgdGhpcy5zdGF0ZS5leHBsYW5hdGlvbkluZGV4LCAnb3V0IG9mJywgdGhpcy5zdGF0ZS5kYXRhLmV4cGxhbmF0aW9ucy5sZW5ndGgpO1xuICB9XG4gIGFzeW5jIGhhbmRsZVN1Ym1pdEFuc3dlcigpIHtcbiAgICBjb25zdCB7IHJvdXRlciB9ID0gdGhpcy5wcm9wc1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2hvd0VkaXRvcjogIXRoaXMuc3RhdGUuc2hvd0VkaXRvcixcbiAgICAgIGRhdGE6IGF3YWl0IGdldENvbmNlcHRFeHBsYW5hdGlvbnMocm91dGVyLnF1ZXJ5LmlkKVxuICAgIH0pXG4gIH1cbiAgYXN5bmMgaGFuZGxlVWRhdGluZ0Rpc3BsYXllZFNjb3JlcygpIHtcbiAgICBjb25zdCB7IHJvdXRlciB9ID0gdGhpcy5wcm9wc1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKGNiID0+IHNldFRpbWVvdXQoY2IsIDUwMCkpIC8vIHRoaXMgaXMgZXh0cmVtZWx5IHNpbGx5OiBpIGFtIHdhaXRpbmcgNTAwbXMgZm9yIGZpcmViYXNlIHRvIHVwZGF0ZSBvdGhlcndpc2UgdGhlcmUgaXMgYSBsYWcgYW5kIHRoZSBzY29yZSBsb29rcyBsaWtlIGl0J3MgMVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZGF0YTogYXdhaXQgZ2V0Q29uY2VwdEV4cGxhbmF0aW9ucyhyb3V0ZXIucXVlcnkuaWQpXG4gICAgfSlcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgICB7XG4gICAgICAgIGNvbnN0IHsgcm91dGVyIH0gPSB0aGlzLnByb3BzXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5kYXRhLmNvbmNlcHQpIHtcbiAgICAgICAgICByZXR1cm4gPExvYWRpbmcgLz5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLnNob3dFZGl0b3IpIHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFRvcFdyYXBwZXI+XG4gICAgICAgICAgICAgIDxNZW51Q29udGFpbmVyIC8+XG4gICAgICAgICAgICAgICAgPEFwcENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgIDxBZGRFeHBsYW5hdGlvbiBoYW5kbGVBbnN3ZXJDbGljaz17dGhpcy5oYW5kbGVBbnN3ZXJDbGlja30gLz5cbiAgICAgICAgICAgICAgICA8L0FwcENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8L1RvcFdyYXBwZXI+XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPFRvcFdyYXBwZXI+XG4gICAgICAgICAgICAgIDxNZW51Q29udGFpbmVyIC8+XG4gICAgICAgICAgICAgICAgPEFwcENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZXhwbGFuYXRpb25IZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgxPlRoZSBzaG9ydCwgc3dlZXQgYW5kIHdvbmRlcmZ1bGx5IHdhY2t5IHdheXMgdG8gZXhwbGFpbiA8c3BhbiBjbGFzc05hbWU9XCJjb25jZXB0LW5hbWVcIj57dGhpcy5zdGF0ZS5kYXRhLmNvbmNlcHR9PC9zcGFuPjwvaDE+XG4gICAgICAgICAgICAgICAgICAgIDxwPnt0aGlzLnN0YXRlLmRhdGEuZXhwbGFuYXRpb25zLmxlbmd0aH0gRXhwbGFuYXRpb25zIOKAoiBLZWVwIGNsaWNraW5nIHRocm91Z2ggdW50aWwgeW91IGZpbmQgb25lIHRoYXQsIHdlbGwsIGNsaWNrcy48L3A+XG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25CYXIgaGFuZGxlQW5zd2VyQ2xpY2s9e3RoaXMuaGFuZGxlQW5zd2VyQ2xpY2t9IC8+XG4gICAgICAgICAgICAgICAgICAgIHsgdGhpcy5zdGF0ZS5zaG93RWRpdG9yICYmXG4gICAgICAgICAgICAgICAgICAgICAgPEVkaXRvciBoYW5kbGVTdWJtaXRBbnN3ZXI9e3RoaXMuaGFuZGxlU3VibWl0QW5zd2VyfS8+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPEV4cGxhbmF0aW9uc1NlY3Rpb24gcGFyZW50SGFuZGxlVm90ZT17dGhpcy5wYXJlbnRIYW5kbGVWb3RlfSBoYW5kbGVVZGF0aW5nRGlzcGxheWVkU2NvcmVzPXt0aGlzLmhhbmRsZVVkYXRpbmdEaXNwbGF5ZWRTY29yZXN9IGluY3JlbWVudEV4cGxhbmF0aW9uPXt0aGlzLmluY3JlbWVudEV4cGxhbmF0aW9ufSBjdXJyZW50RXhwbGFuYXRpb249e3RoaXMuc3RhdGUuZGF0YS5leHBsYW5hdGlvbnNbdGhpcy5zdGF0ZS5leHBsYW5hdGlvbkluZGV4XX0gLz5cbiAgICAgICAgICAgICAgICA8L0FwcENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPC9Ub3BXcmFwcGVyPlxuICAgICAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICAgICAgLmV4cGxhbmF0aW9uSGVhZGVyIGgxIHtcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC5leHBsYW5hdGlvbkhlYWRlciBwIHtcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogI2E5YTlhOTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLmNvbmNlcHQtbmFtZSB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogIzY0NjJFRjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgQWN0aW9uQmFyIHtcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoRXhwbGFpblRoaXMpXG4iXX0= */\\n/*@ sourceURL=/Users/danigrant/Projects/explainthis/pages/explainthis/[id].js */\"));\n      }\n    }\n  }\n\n}\n\nexport default withRouter(ExplainThis);","map":{"version":3,"sources":["/Users/danigrant/Projects/explainthis/pages/explainthis/[id].js"],"names":["React","TopWrapper","MenuContainer","AppContainer","ActionBar","ExplanationsSection","Editor","getConceptExplanations","Loading","withRouter","AddExplanation","ExplainThis","Component","constructor","props","setState","showEditor","state","newIndex","explanationIndex","data","explanations","length","console","log","router","handleSubmitAnswer","bind","handleUdatingDisplayedScores","parentHandleVote","componentWillMount","query","id","cb","setTimeout","render","concept","handleAnswerClick","incrementExplanation"],"mappings":"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","sourcesContent":["import React from 'react'\nimport TopWrapper from '../../components/TopWrapper'\nimport MenuContainer from '../../components/MenuContainer'\nimport AppContainer from '../../components/AppContainer';\nimport ActionBar from '../../components/ActionBar'\nimport ExplanationsSection from '../../components/ExplanationsSection'\nimport Editor from '../../components/Editor'\nimport { getConceptExplanations } from '../../components/Firebase'\nimport Loading from '../../components/Loading'\nimport { withRouter } from 'next/router'\nimport AddExplanation from '../../components/AddExplanation'\n\nclass ExplainThis extends React.Component {\n  constructor(props) {\n    super(props) // first thing you always do, calls the master react constructor\n    this.state = {\n      showEditor: false,\n      data: {},\n      explanationIndex: 0\n    }\n    const { router } = this.props\n    this.handleSubmitAnswer = this.handleSubmitAnswer.bind(this)\n    this.handleUdatingDisplayedScores = this.handleUdatingDisplayedScores.bind(this)\n    this.parentHandleVote = this.parentHandleVote.bind(this)\n  }\n  async componentWillMount() {\n    const { router } = this.props\n    this.setState({\n      data: await getConceptExplanations(router.query.id)\n    })\n  }\n  handleAnswerClick = () => {\n    this.setState({\n      showEditor: !this.state.showEditor\n    })\n  }\n  async parentHandleVote() {\n    const { router } = this.props\n    // this.setState({\n    //   data: await getConceptExplanations(router.query.id)\n    // })\n  }\n  incrementExplanation = () => {\n    let newIndex = this.state.explanationIndex == this.state.data.explanations.length - 1 ? 0 : this.state.explanationIndex + 1\n    this.setState({\n      explanationIndex: newIndex\n    })\n    console.log('in incrementExplanation, new index is', this.state.explanationIndex, 'out of', this.state.data.explanations.length);\n  }\n  async handleSubmitAnswer() {\n    const { router } = this.props\n    this.setState({\n      showEditor: !this.state.showEditor,\n      data: await getConceptExplanations(router.query.id)\n    })\n  }\n  async handleUdatingDisplayedScores() {\n    const { router } = this.props\n    await new Promise(cb => setTimeout(cb, 500)) // this is extremely silly: i am waiting 500ms for firebase to update otherwise there is a lag and the score looks like it's 1\n    this.setState({\n      data: await getConceptExplanations(router.query.id)\n    })\n  }\n  render() {\n      {\n        const { router } = this.props\n        if (!this.state.data.concept) {\n          return <Loading />\n        } else if (this.state.showEditor) {\n          return (\n            <TopWrapper>\n              <MenuContainer />\n                <AppContainer>\n                  <AddExplanation handleAnswerClick={this.handleAnswerClick} />\n                </AppContainer>\n                </TopWrapper>\n          )\n        }\n        else {\n          return (\n            <div>\n            <TopWrapper>\n              <MenuContainer />\n                <AppContainer>\n                  <div className=\"explanationHeader\">\n                    <h1>The short, sweet and wonderfully wacky ways to explain <span className=\"concept-name\">{this.state.data.concept}</span></h1>\n                    <p>{this.state.data.explanations.length} Explanations • Keep clicking through until you find one that, well, clicks.</p>\n                    <ActionBar handleAnswerClick={this.handleAnswerClick} />\n                    { this.state.showEditor &&\n                      <Editor handleSubmitAnswer={this.handleSubmitAnswer}/>\n                    }\n                  </div>\n                  <ExplanationsSection parentHandleVote={this.parentHandleVote} handleUdatingDisplayedScores={this.handleUdatingDisplayedScores} incrementExplanation={this.incrementExplanation} currentExplanation={this.state.data.explanations[this.state.explanationIndex]} />\n                </AppContainer>\n              </TopWrapper>\n              <style jsx>{`\n                .explanationHeader h1 {\n                  margin-bottom: 0;\n                }\n                .explanationHeader p {\n                  margin-top: 10px;\n                  margin-bottom: 5px;\n                  color: #a9a9a9;\n                }\n                .concept-name {\n                  color: #6462EF;\n                }\n                ActionBar {\n                  margin-bottom: 10px;\n                }\n             `}</style>\n            </div>\n          )\n        }\n      }\n  }\n}\n\nexport default withRouter(ExplainThis)\n"]},"metadata":{},"sourceType":"module"}