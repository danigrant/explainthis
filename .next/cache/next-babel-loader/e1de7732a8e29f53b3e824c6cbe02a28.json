{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/danigrant/Projects/explainthis/pages/explainthis/[id].js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport TopWrapper from '../../components/TopWrapper';\nimport MenuContainer from '../../components/MenuContainer';\nimport AppContainer from '../../components/AppContainer';\nimport ActionBar from '../../components/ActionBar';\nimport ExplanationsSection from '../../components/ExplanationsSection';\nimport Editor from '../../components/Editor';\nimport { getConceptExplanations } from '../../components/Firebase';\nimport Loading from '../../components/Loading';\nimport { withRouter } from 'next/router';\nimport AddExplanation from '../../components/AddExplanation';\n\nvar ExplainThis =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ExplainThis, _React$Component);\n\n  function ExplainThis(props) {\n    var _this;\n\n    _classCallCheck(this, ExplainThis);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ExplainThis).call(this, props)); // first thing you always do, calls the master react constructor\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAnswerClick\", function () {\n      _this.setState({\n        showEditor: !_this.state.showEditor\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"incrementExplanation\", function () {\n      var newIndex = _this.state.explanationIndex == _this.state.data.explanations.length - 1 ? 0 : _this.state.explanationIndex + 1;\n\n      _this.setState({\n        explanationIndex: newIndex\n      });\n\n      console.log('in incrementExplanation, new index is', _this.state.explanationIndex, 'out of', _this.state.data.explanations.length);\n    });\n\n    _this.state = {\n      showEditor: false,\n      data: {},\n      explanationIndex: 0,\n      celebration: false\n    };\n    var router = _this.props.router;\n    _this.handleSubmitAnswer = _this.handleSubmitAnswer.bind(_assertThisInitialized(_this));\n    _this.handleUdatingDisplayedScores = _this.handleUdatingDisplayedScores.bind(_assertThisInitialized(_this));\n    _this.parentHandleVote = _this.parentHandleVote.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ExplainThis, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var router;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                router = this.props.router;\n                _context.t0 = this;\n                _context.next = 4;\n                return getConceptExplanations(router.query.id);\n\n              case 4:\n                _context.t1 = _context.sent;\n                _context.t2 = {\n                  data: _context.t1\n                };\n\n                _context.t0.setState.call(_context.t0, _context.t2);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"parentHandleVote\",\n    value: function () {\n      var _parentHandleVote = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var router;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                router = this.props.router; // this.setState({\n                //   data: await getConceptExplanations(router.query.id)\n                // })\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function parentHandleVote() {\n        return _parentHandleVote.apply(this, arguments);\n      }\n\n      return parentHandleVote;\n    }()\n  }, {\n    key: \"handleSubmitAnswer\",\n    value: function () {\n      var _handleSubmitAnswer = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(celebrationBoolean) {\n        var router;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                router = this.props.router;\n                _context3.t0 = this;\n                _context3.t1 = !this.state.showEditor;\n                _context3.next = 5;\n                return getConceptExplanations(router.query.id);\n\n              case 5:\n                _context3.t2 = _context3.sent;\n                _context3.t3 = celebrationBoolean;\n                _context3.t4 = {\n                  showEditor: _context3.t1,\n                  data: _context3.t2,\n                  celebration: _context3.t3\n                };\n\n                _context3.t0.setState.call(_context3.t0, _context3.t4);\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function handleSubmitAnswer(_x) {\n        return _handleSubmitAnswer.apply(this, arguments);\n      }\n\n      return handleSubmitAnswer;\n    }()\n  }, {\n    key: \"handleUdatingDisplayedScores\",\n    value: function () {\n      var _handleUdatingDisplayedScores = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var router;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                router = this.props.router;\n                _context4.next = 3;\n                return new _Promise(function (cb) {\n                  return setTimeout(cb, 500);\n                });\n\n              case 3:\n                _context4.t0 = this;\n                _context4.next = 6;\n                return getConceptExplanations(router.query.id);\n\n              case 6:\n                _context4.t1 = _context4.sent;\n                _context4.t2 = {\n                  data: _context4.t1\n                };\n\n                _context4.t0.setState.call(_context4.t0, _context4.t2);\n\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function handleUdatingDisplayedScores() {\n        return _handleUdatingDisplayedScores.apply(this, arguments);\n      }\n\n      return handleUdatingDisplayedScores;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      {\n        var router = this.props.router;\n\n        if (!this.state.data.concept) {\n          return __jsx(Loading, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 70\n            },\n            __self: this\n          });\n        } else if (this.state.showEditor) {\n          return __jsx(TopWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73\n            },\n            __self: this\n          }, __jsx(MenuContainer, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74\n            },\n            __self: this\n          }), __jsx(AppContainer, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75\n            },\n            __self: this\n          }, __jsx(AddExplanation, {\n            handleAnswerClick: this.handleAnswerClick,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76\n            },\n            __self: this\n          })));\n        } else {\n          return __jsx(\"div\", {\n            className: \"jsx-2246162651\" + \" \" + \"wrapper\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83\n            },\n            __self: this\n          }, __jsx(TopWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84\n            },\n            __self: this\n          }, __jsx(MenuContainer, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85\n            },\n            __self: this\n          }), __jsx(AppContainer, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86\n            },\n            __self: this\n          }, __jsx(\"div\", {\n            className: \"jsx-2246162651\" + \" \" + \"explanationHeader\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 87\n            },\n            __self: this\n          }, __jsx(\"h1\", {\n            className: \"jsx-2246162651\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88\n            },\n            __self: this\n          }, \"The short, sweet and wonderfully wacky ways to explain \", __jsx(\"span\", {\n            className: \"jsx-2246162651\" + \" \" + \"concept-name\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88\n            },\n            __self: this\n          }, this.state.data.concept)), __jsx(\"p\", {\n            className: \"jsx-2246162651\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89\n            },\n            __self: this\n          }, this.state.data.explanations.length, \" Explanations \\u2022 Keep clicking through until you find one that, well, clicks.\"), __jsx(ActionBar, {\n            handleAnswerClick: this.handleAnswerClick,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 90\n            },\n            __self: this\n          }), this.state.showEditor && __jsx(Editor, {\n            celebration: this.state.celebration,\n            handleSubmitAnswer: this.handleSubmitAnswer,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92\n            },\n            __self: this\n          })), __jsx(ExplanationsSection, {\n            handleSubmitAnswer: this.handleSubmitAnswer,\n            parentHandleVote: this.parentHandleVote,\n            handleUdatingDisplayedScores: this.handleUdatingDisplayedScores,\n            incrementExplanation: this.incrementExplanation,\n            currentExplanation: this.state.data.explanations[this.state.explanationIndex],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            },\n            __self: this\n          }))), __jsx(_JSXStyle, {\n            id: \"2246162651\",\n            __self: this\n          }, \".wrapper.jsx-2246162651{width:100%;}.explanationHeader.jsx-2246162651 h1.jsx-2246162651{margin-bottom:0;font-weight:900;}.explanationHeader.jsx-2246162651 p.jsx-2246162651{margin-top:10px;margin-bottom:5px;color:#a9a9a9;}.concept-name.jsx-2246162651{color:#6462EF;}ActionBar.jsx-2246162651{margin-bottom:10px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYW5pZ3JhbnQvUHJvamVjdHMvZXhwbGFpbnRoaXMvcGFnZXMvZXhwbGFpbnRoaXMvW2lkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpRzBCLEFBRzhCLEFBR0ssQUFJQSxBQUtGLEFBR0ssV0FkckIsR0FZQSxFQVRrQixBQUlFLEdBUXBCLGFBWEEsRUFJZ0IsY0FDaEIiLCJmaWxlIjoiL1VzZXJzL2RhbmlncmFudC9Qcm9qZWN0cy9leHBsYWludGhpcy9wYWdlcy9leHBsYWludGhpcy9baWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFRvcFdyYXBwZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Ub3BXcmFwcGVyJ1xuaW1wb3J0IE1lbnVDb250YWluZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9NZW51Q29udGFpbmVyJ1xuaW1wb3J0IEFwcENvbnRhaW5lciBmcm9tICcuLi8uLi9jb21wb25lbnRzL0FwcENvbnRhaW5lcic7XG5pbXBvcnQgQWN0aW9uQmFyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQWN0aW9uQmFyJ1xuaW1wb3J0IEV4cGxhbmF0aW9uc1NlY3Rpb24gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9FeHBsYW5hdGlvbnNTZWN0aW9uJ1xuaW1wb3J0IEVkaXRvciBmcm9tICcuLi8uLi9jb21wb25lbnRzL0VkaXRvcidcbmltcG9ydCB7IGdldENvbmNlcHRFeHBsYW5hdGlvbnMgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0ZpcmViYXNlJ1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Mb2FkaW5nJ1xuaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xuaW1wb3J0IEFkZEV4cGxhbmF0aW9uIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQWRkRXhwbGFuYXRpb24nXG5cbmNsYXNzIEV4cGxhaW5UaGlzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcykgLy8gZmlyc3QgdGhpbmcgeW91IGFsd2F5cyBkbywgY2FsbHMgdGhlIG1hc3RlciByZWFjdCBjb25zdHJ1Y3RvclxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzaG93RWRpdG9yOiBmYWxzZSxcbiAgICAgIGRhdGE6IHt9LFxuICAgICAgZXhwbGFuYXRpb25JbmRleDogMCxcbiAgICAgIGNlbGVicmF0aW9uOiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCB7IHJvdXRlciB9ID0gdGhpcy5wcm9wc1xuICAgIHRoaXMuaGFuZGxlU3VibWl0QW5zd2VyID0gdGhpcy5oYW5kbGVTdWJtaXRBbnN3ZXIuYmluZCh0aGlzKVxuICAgIHRoaXMuaGFuZGxlVWRhdGluZ0Rpc3BsYXllZFNjb3JlcyA9IHRoaXMuaGFuZGxlVWRhdGluZ0Rpc3BsYXllZFNjb3Jlcy5iaW5kKHRoaXMpXG4gICAgdGhpcy5wYXJlbnRIYW5kbGVWb3RlID0gdGhpcy5wYXJlbnRIYW5kbGVWb3RlLmJpbmQodGhpcylcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgY29uc3QgeyByb3V0ZXIgfSA9IHRoaXMucHJvcHNcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRhdGE6IGF3YWl0IGdldENvbmNlcHRFeHBsYW5hdGlvbnMocm91dGVyLnF1ZXJ5LmlkKVxuICAgIH0pXG4gIH1cbiAgaGFuZGxlQW5zd2VyQ2xpY2sgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzaG93RWRpdG9yOiAhdGhpcy5zdGF0ZS5zaG93RWRpdG9yXG4gICAgfSlcbiAgfVxuICBhc3luYyBwYXJlbnRIYW5kbGVWb3RlKCkge1xuICAgIGNvbnN0IHsgcm91dGVyIH0gPSB0aGlzLnByb3BzXG4gICAgLy8gdGhpcy5zZXRTdGF0ZSh7XG4gICAgLy8gICBkYXRhOiBhd2FpdCBnZXRDb25jZXB0RXhwbGFuYXRpb25zKHJvdXRlci5xdWVyeS5pZClcbiAgICAvLyB9KVxuICB9XG4gIGluY3JlbWVudEV4cGxhbmF0aW9uID0gKCkgPT4ge1xuICAgIGxldCBuZXdJbmRleCA9IHRoaXMuc3RhdGUuZXhwbGFuYXRpb25JbmRleCA9PSB0aGlzLnN0YXRlLmRhdGEuZXhwbGFuYXRpb25zLmxlbmd0aCAtIDEgPyAwIDogdGhpcy5zdGF0ZS5leHBsYW5hdGlvbkluZGV4ICsgMVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZXhwbGFuYXRpb25JbmRleDogbmV3SW5kZXhcbiAgICB9KVxuICAgIGNvbnNvbGUubG9nKCdpbiBpbmNyZW1lbnRFeHBsYW5hdGlvbiwgbmV3IGluZGV4IGlzJywgdGhpcy5zdGF0ZS5leHBsYW5hdGlvbkluZGV4LCAnb3V0IG9mJywgdGhpcy5zdGF0ZS5kYXRhLmV4cGxhbmF0aW9ucy5sZW5ndGgpO1xuICB9XG4gIGFzeW5jIGhhbmRsZVN1Ym1pdEFuc3dlcihjZWxlYnJhdGlvbkJvb2xlYW4pIHtcbiAgICBjb25zdCB7IHJvdXRlciB9ID0gdGhpcy5wcm9wc1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2hvd0VkaXRvcjogIXRoaXMuc3RhdGUuc2hvd0VkaXRvcixcbiAgICAgIGRhdGE6IGF3YWl0IGdldENvbmNlcHRFeHBsYW5hdGlvbnMocm91dGVyLnF1ZXJ5LmlkKSxcbiAgICAgIGNlbGVicmF0aW9uOiBjZWxlYnJhdGlvbkJvb2xlYW5cbiAgICB9KVxuICB9XG4gIGFzeW5jIGhhbmRsZVVkYXRpbmdEaXNwbGF5ZWRTY29yZXMoKSB7XG4gICAgY29uc3QgeyByb3V0ZXIgfSA9IHRoaXMucHJvcHNcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShjYiA9PiBzZXRUaW1lb3V0KGNiLCA1MDApKSAvLyB0aGlzIGlzIGV4dHJlbWVseSBzaWxseTogaSBhbSB3YWl0aW5nIDUwMG1zIGZvciBmaXJlYmFzZSB0byB1cGRhdGUgb3RoZXJ3aXNlIHRoZXJlIGlzIGEgbGFnIGFuZCB0aGUgc2NvcmUgbG9va3MgbGlrZSBpdCdzIDFcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRhdGE6IGF3YWl0IGdldENvbmNlcHRFeHBsYW5hdGlvbnMocm91dGVyLnF1ZXJ5LmlkKVxuICAgIH0pXG4gIH1cbiAgcmVuZGVyKCkge1xuICAgICAge1xuICAgICAgICBjb25zdCB7IHJvdXRlciB9ID0gdGhpcy5wcm9wc1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuZGF0YS5jb25jZXB0KSB7XG4gICAgICAgICAgcmV0dXJuIDxMb2FkaW5nIC8+XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5zaG93RWRpdG9yKSB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxUb3BXcmFwcGVyPlxuICAgICAgICAgICAgICA8TWVudUNvbnRhaW5lciAvPlxuICAgICAgICAgICAgICAgIDxBcHBDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICA8QWRkRXhwbGFuYXRpb24gaGFuZGxlQW5zd2VyQ2xpY2s9e3RoaXMuaGFuZGxlQW5zd2VyQ2xpY2t9IC8+XG4gICAgICAgICAgICAgICAgPC9BcHBDb250YWluZXI+XG4gICAgICAgICAgICAgICAgPC9Ub3BXcmFwcGVyPlxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3cmFwcGVyXCI+XG4gICAgICAgICAgICA8VG9wV3JhcHBlcj5cbiAgICAgICAgICAgICAgPE1lbnVDb250YWluZXIgLz5cbiAgICAgICAgICAgICAgICA8QXBwQ29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJleHBsYW5hdGlvbkhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8aDE+VGhlIHNob3J0LCBzd2VldCBhbmQgd29uZGVyZnVsbHkgd2Fja3kgd2F5cyB0byBleHBsYWluIDxzcGFuIGNsYXNzTmFtZT1cImNvbmNlcHQtbmFtZVwiPnt0aGlzLnN0YXRlLmRhdGEuY29uY2VwdH08L3NwYW4+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgPHA+e3RoaXMuc3RhdGUuZGF0YS5leHBsYW5hdGlvbnMubGVuZ3RofSBFeHBsYW5hdGlvbnMg4oCiIEtlZXAgY2xpY2tpbmcgdGhyb3VnaCB1bnRpbCB5b3UgZmluZCBvbmUgdGhhdCwgd2VsbCwgY2xpY2tzLjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPEFjdGlvbkJhciBoYW5kbGVBbnN3ZXJDbGljaz17dGhpcy5oYW5kbGVBbnN3ZXJDbGlja30gLz5cbiAgICAgICAgICAgICAgICAgICAgeyB0aGlzLnN0YXRlLnNob3dFZGl0b3IgJiZcbiAgICAgICAgICAgICAgICAgICAgICA8RWRpdG9yIGNlbGVicmF0aW9uPXt0aGlzLnN0YXRlLmNlbGVicmF0aW9ufSBoYW5kbGVTdWJtaXRBbnN3ZXI9e3RoaXMuaGFuZGxlU3VibWl0QW5zd2VyfS8+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPEV4cGxhbmF0aW9uc1NlY3Rpb24gaGFuZGxlU3VibWl0QW5zd2VyPXt0aGlzLmhhbmRsZVN1Ym1pdEFuc3dlcn0gcGFyZW50SGFuZGxlVm90ZT17dGhpcy5wYXJlbnRIYW5kbGVWb3RlfSBoYW5kbGVVZGF0aW5nRGlzcGxheWVkU2NvcmVzPXt0aGlzLmhhbmRsZVVkYXRpbmdEaXNwbGF5ZWRTY29yZXN9IGluY3JlbWVudEV4cGxhbmF0aW9uPXt0aGlzLmluY3JlbWVudEV4cGxhbmF0aW9ufSBjdXJyZW50RXhwbGFuYXRpb249e3RoaXMuc3RhdGUuZGF0YS5leHBsYW5hdGlvbnNbdGhpcy5zdGF0ZS5leHBsYW5hdGlvbkluZGV4XX0gLz5cbiAgICAgICAgICAgICAgICA8L0FwcENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPC9Ub3BXcmFwcGVyPlxuICAgICAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICAgICAgLndyYXBwZXIge1xuICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC5leHBsYW5hdGlvbkhlYWRlciBoMSB7XG4gICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDkwMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLmV4cGxhbmF0aW9uSGVhZGVyIHAge1xuICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAjYTlhOWE5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAuY29uY2VwdC1uYW1lIHtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAjNjQ2MkVGO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBBY3Rpb25CYXIge1xuICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgYH08L3N0eWxlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihFeHBsYWluVGhpcylcbiJdfQ== */\\n/*@ sourceURL=/Users/danigrant/Projects/explainthis/pages/explainthis/[id].js */\"));\n        }\n      }\n    }\n  }]);\n\n  return ExplainThis;\n}(React.Component);\n\nexport default withRouter(ExplainThis);","map":{"version":3,"sources":["/Users/danigrant/Projects/explainthis/pages/explainthis/[id].js"],"names":["React","TopWrapper","MenuContainer","AppContainer","ActionBar","ExplanationsSection","Editor","getConceptExplanations","Loading","withRouter","AddExplanation","ExplainThis","props","setState","showEditor","state","newIndex","explanationIndex","data","explanations","length","console","log","celebration","router","handleSubmitAnswer","bind","handleUdatingDisplayedScores","parentHandleVote","query","id","celebrationBoolean","cb","setTimeout","concept","handleAnswerClick","incrementExplanation","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport TopWrapper from '../../components/TopWrapper'\nimport MenuContainer from '../../components/MenuContainer'\nimport AppContainer from '../../components/AppContainer';\nimport ActionBar from '../../components/ActionBar'\nimport ExplanationsSection from '../../components/ExplanationsSection'\nimport Editor from '../../components/Editor'\nimport { getConceptExplanations } from '../../components/Firebase'\nimport Loading from '../../components/Loading'\nimport { withRouter } from 'next/router'\nimport AddExplanation from '../../components/AddExplanation'\n\nclass ExplainThis extends React.Component {\n  constructor(props) {\n    super(props) // first thing you always do, calls the master react constructor\n    this.state = {\n      showEditor: false,\n      data: {},\n      explanationIndex: 0,\n      celebration: false\n    }\n    const { router } = this.props\n    this.handleSubmitAnswer = this.handleSubmitAnswer.bind(this)\n    this.handleUdatingDisplayedScores = this.handleUdatingDisplayedScores.bind(this)\n    this.parentHandleVote = this.parentHandleVote.bind(this)\n  }\n  async componentWillMount() {\n    const { router } = this.props\n    this.setState({\n      data: await getConceptExplanations(router.query.id)\n    })\n  }\n  handleAnswerClick = () => {\n    this.setState({\n      showEditor: !this.state.showEditor\n    })\n  }\n  async parentHandleVote() {\n    const { router } = this.props\n    // this.setState({\n    //   data: await getConceptExplanations(router.query.id)\n    // })\n  }\n  incrementExplanation = () => {\n    let newIndex = this.state.explanationIndex == this.state.data.explanations.length - 1 ? 0 : this.state.explanationIndex + 1\n    this.setState({\n      explanationIndex: newIndex\n    })\n    console.log('in incrementExplanation, new index is', this.state.explanationIndex, 'out of', this.state.data.explanations.length);\n  }\n  async handleSubmitAnswer(celebrationBoolean) {\n    const { router } = this.props\n    this.setState({\n      showEditor: !this.state.showEditor,\n      data: await getConceptExplanations(router.query.id),\n      celebration: celebrationBoolean\n    })\n  }\n  async handleUdatingDisplayedScores() {\n    const { router } = this.props\n    await new Promise(cb => setTimeout(cb, 500)) // this is extremely silly: i am waiting 500ms for firebase to update otherwise there is a lag and the score looks like it's 1\n    this.setState({\n      data: await getConceptExplanations(router.query.id)\n    })\n  }\n  render() {\n      {\n        const { router } = this.props\n        if (!this.state.data.concept) {\n          return <Loading />\n        } else if (this.state.showEditor) {\n          return (\n            <TopWrapper>\n              <MenuContainer />\n                <AppContainer>\n                  <AddExplanation handleAnswerClick={this.handleAnswerClick} />\n                </AppContainer>\n                </TopWrapper>\n          )\n        }\n        else {\n          return (\n            <div className=\"wrapper\">\n            <TopWrapper>\n              <MenuContainer />\n                <AppContainer>\n                  <div className=\"explanationHeader\">\n                    <h1>The short, sweet and wonderfully wacky ways to explain <span className=\"concept-name\">{this.state.data.concept}</span></h1>\n                    <p>{this.state.data.explanations.length} Explanations • Keep clicking through until you find one that, well, clicks.</p>\n                    <ActionBar handleAnswerClick={this.handleAnswerClick} />\n                    { this.state.showEditor &&\n                      <Editor celebration={this.state.celebration} handleSubmitAnswer={this.handleSubmitAnswer}/>\n                    }\n                  </div>\n                  <ExplanationsSection handleSubmitAnswer={this.handleSubmitAnswer} parentHandleVote={this.parentHandleVote} handleUdatingDisplayedScores={this.handleUdatingDisplayedScores} incrementExplanation={this.incrementExplanation} currentExplanation={this.state.data.explanations[this.state.explanationIndex]} />\n                </AppContainer>\n              </TopWrapper>\n              <style jsx>{`\n                .wrapper {\n                  width: 100%;\n                }\n                .explanationHeader h1 {\n                  margin-bottom: 0;\n                  font-weight: 900;\n                }\n                .explanationHeader p {\n                  margin-top: 10px;\n                  margin-bottom: 5px;\n                  color: #a9a9a9;\n                }\n                .concept-name {\n                  color: #6462EF;\n                }\n                ActionBar {\n                  margin-bottom: 10px;\n                }\n             `}</style>\n            </div>\n          )\n        }\n      }\n  }\n}\n\nexport default withRouter(ExplainThis)\n"]},"metadata":{},"sourceType":"module"}