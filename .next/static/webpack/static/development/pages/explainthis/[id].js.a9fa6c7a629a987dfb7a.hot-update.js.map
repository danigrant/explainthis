{"version":3,"file":"static/webpack/static/development/pages/explainthis/[id].js.a9fa6c7a629a987dfb7a.hot-update.js","sources":["webpack:///./pages/explainthis/.js"],"sourcesContent":["import React from 'react'\nimport TopWrapper from '../../components/TopWrapper'\nimport MenuContainer from '../../components/MenuContainer'\nimport AppContainer from '../../components/AppContainer';\nimport ActionBar from '../../components/ActionBar'\nimport ExplanationsSection from '../../components/ExplanationsSection'\nimport Editor from '../../components/Editor'\nimport { getConceptExplanations } from '../../components/Firebase'\nimport Loading from '../../components/Loading'\nimport { withRouter } from 'next/router'\nimport AddExplanation from '../../components/AddExplanation'\n\nclass ExplainThis extends React.Component {\n  constructor(props) {\n    super(props) // first thing you always do, calls the master react constructor\n    this.state = {\n      showEditor: false,\n      data: {},\n      explanationIndex: 0,\n      celebration: false\n    }\n    const { router } = this.props\n    this.handleSubmitAnswer = this.handleSubmitAnswer.bind(this)\n    this.handleUdatingDisplayedScores = this.handleUdatingDisplayedScores.bind(this)\n    this.parentHandleVote = this.parentHandleVote.bind(this)\n  }\n  async componentWillMount() {\n    const { router } = this.props\n    this.setState({\n      data: await getConceptExplanations(router.query.id)\n    })\n  }\n  handleAnswerClick = () => {\n    this.setState({\n      showEditor: !this.state.showEditor\n    })\n  }\n  async parentHandleVote() {\n    const { router } = this.props\n    // this.setState({\n    //   data: await getConceptExplanations(router.query.id)\n    // })\n  }\n  incrementExplanation = () => {\n    let newIndex = this.state.explanationIndex == this.state.data.explanations.length - 1 ? 0 : this.state.explanationIndex + 1\n    this.setState({\n      explanationIndex: newIndex\n    })\n    console.log('in incrementExplanation, new index is', this.state.explanationIndex, 'out of', this.state.data.explanations.length);\n  }\n  noMoreCelebration = () => {\n    this.setState({\n      celebration: false\n    })\n  }\n  async handleSubmitAnswer(celebrationBoolean) {\n    const { router } = this.props\n    this.setState({\n      showEditor: !this.state.showEditor,\n      data: await getConceptExplanations(router.query.id),\n      celebration: celebrationBoolean\n    })\n  }\n  async handleUdatingDisplayedScores() {\n    const { router } = this.props\n    await new Promise(cb => setTimeout(cb, 500)) // this is extremely silly: i am waiting 500ms for firebase to update otherwise there is a lag and the score looks like it's 1\n    this.setState({\n      data: await getConceptExplanations(router.query.id)\n    })\n  }\n  render() {\n      {\n        const { router } = this.props\n        if (!this.state.data.concept) {\n          return <Loading />\n        } else if (this.state.showEditor) {\n          return (\n            <TopWrapper>\n              <MenuContainer />\n                <AppContainer>\n                  <AddExplanation celebration={this.state.celebration} handleAnswerClick={this.handleAnswerClick} />\n                </AppContainer>\n                </TopWrapper>\n          )\n        }\n        else {\n          return (\n            <div className=\"wrapper\">\n            <TopWrapper>\n              <MenuContainer />\n                <AppContainer>\n                  <div className=\"explanationHeader\">\n                    <h1>The short, sweet and wonderfully wacky ways to explain <span className=\"concept-name\">{this.state.data.concept}</span></h1>\n                    <p>{this.state.data.explanations.length} Explanations â€¢ Keep clicking through until you find one that, well, clicks.</p>\n                    <ActionBar handleAnswerClick={this.handleAnswerClick} />\n                    { this.state.showEditor &&\n                      <Editor handleSubmitAnswer={this.handleSubmitAnswer}/>\n                    }\n                  </div>\n                  <ExplanationsSection handleSubmitAnswer={this.handleSubmitAnswer} parentHandleVote={this.parentHandleVote} handleUdatingDisplayedScores={this.handleUdatingDisplayedScores} incrementExplanation={this.incrementExplanation} currentExplanation={this.state.data.explanations[this.state.explanationIndex]} />\n                </AppContainer>\n              </TopWrapper>\n              <style jsx>{`\n                .wrapper {\n                  width: 100%;\n                }\n                .explanationHeader h1 {\n                  margin-bottom: 0;\n                  font-weight: 900;\n                }\n                .explanationHeader p {\n                  margin-top: 10px;\n                  margin-bottom: 5px;\n                  color: #a9a9a9;\n                }\n                .concept-name {\n                  color: #6462EF;\n                }\n                ActionBar {\n                  margin-bottom: 10px;\n                }\n             `}</style>\n            </div>\n          )\n        }\n      }\n  }\n}\n\nexport default withRouter(ExplainThis)\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAoBA;AACA;AADA;AAGA;AACA;AAxBA;AA+BA;AACA;AAAA;AACA;AADA;AACA;AAEA;AACA;AACA;AArCA;AAsCA;AACA;AADA;AAGA;AACA;AAxCA;AACA;AACA;AACA;AACA;AAJA;AAFA;AASA;AACA;AACA;AAXA;AAYA;AACA;;;;;;;;;;;;AACA;AACA;;AACA;AACA;;;;AADA;;;AADA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AAaA;;;;;;AACA;AACA;AACA;;AACA;AACA;;;AAAA;;AAFA;AACA;AACA;;;AAHA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA;;AACA;AAAA;AAAA;AACA;;AAAA;;AACA;AACA;;;;AADA;;;AADA;AACA;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAZA;AAAA;AAAA;AAqCA;AACA;AACA;;;;AAlHA;AACA;AAoHA;;;;A","sourceRoot":""}